<html>
<title>Release Process</title>
<body>
<h2>Release Process</h2>

<p>TODO: initial setup instructions</p>

These instructions assume you are releasing version 1.0.11-alpha.
<ul>
  <li>Push to central Maven repository (based on instructions from <a
    href="https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide">Sonatype
  OSS Maven Repository Usage Guide</a>):
  <ul>
    <li><code>mvn clean deploy</code></li>
    <li><code>mvn release:clean</code></li>
    <li><code>mvn release:prepare -DautoVersionSubmodules=true</code>
    <ul>
      <li>Accept default for 'What is the release version for "Google API
      Client - Parent"?'</li>
      <li>Type <code>1.0.11-alpha</code> for 'What is SCM release tag or
      label for "Google API Client - Parent"?'</li>
      <li>Accept default for 'What is the new development version for
      "Google API Client - Parent"?'</li>
    </ul>
    </li>
    <li><code>mvn release:perform -Darguments=-Dgpg.passphrase=<i>&lt;YOUR
    GPG PASSPHRASE&gt;</i></code></li>
    <li>Release on oss.sonatype.org
    <ul>
      <li>Log in to <a href="https://oss.sonatype.org">https://oss.sonatype.org</a></li>
      <li>Click on "Staging Repositories"</li>
      <li>check box next to uploaded release</li>
      <li>click Close button; type <code>1.0.11-alpha</code> and click
      Close</li>
      <li>check box next to uploaded release</li>
      <li>click Release button; type <code>1.0.11-alpha</code> and click
      Release</li>
    </ul>
    </li>
    <li>Central Maven repository is synced hourly. Wait for the new version
    at: <a
      href="http://repo2.maven.org/maven2/com/google/api/client/google-api-client/">repo2.maven.org</a></li>
  </ul>
  </li>
  <li>Upload distribution zip to code.google.com
  <ul>
    <li><code>hg update -r 1.0.11-alpha</code></li>
    <li><code>mvn clean install</code></li>
    <li><code>cd google-api-client</code></li>
    <li><code>mvn source:jar javadoc:jar assembly:assembly</code></li>
    <li>Upload to <a
      href="http://code.google.com/p/google-api-java-client/downloads/entry">http://code.google.com/p/google-api-java-client/downloads/entry</a>
    <ul>
      <li>Summary: Google API Client Library for Java, version 1.0.11-alpha</li>
      <li>File: <code>google-api-java-client/target/google-api-client-1.0.11-alpha-java.zip</code></li>
      <li>Labels: <code>Type-Archive</code>, <code>OpSys-All</code>, and <code>Featured</code></li>
      <li>click Submit file</li>
    </ul>
    </li>
    <li>Deprecate any obsolete libraries.</li>
    <li>Update <a
      href="http://code.google.com/p/google-api-java-client/admin">http://code.google.com/p/google-api-java-client/admin</a></li>
  </ul>
  </li>
  <li>Update javadoc project: copy <code>target/site/apidocs</code> to
  1.0.11-alpha in javadoc project, and update <code>javadoc/index.html</code> to
  the new version
  <ul>
    <li><code>cp -R target/apidocs <i>somepath</i>/javadoc/1.0.11-alpha</code></li>
    <li><code>cd <i>somepath</i>/javadoc</code></li>
    <li><code>vi index.html</code></li>
    <li><code>hg add</code></li>
    <li><code>hg commit -m "1.0.11-alpha"</code></li>
    <li><code>hg push</code></li>
  </ul>
  </li>
  <li><code>hg update</code></li>
  <li>update <code>instructions.html</code>, <code>google-api-client/assemble/release.html</code>,
  <code>google-api-client/generator/com/google/api/client/generator/model/PackageModel.java</code>
  and <code>google-api-client/src/com/google/api/client/http/HttpRequest.java</code>
  to next version</li>
  <li>Re-run <code>GeneratePom</code> in Eclipse</li>
</ul>
</body>
</html>
